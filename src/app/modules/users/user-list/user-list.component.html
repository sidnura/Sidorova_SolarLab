<div class="user-list-container">
  <div class="header">
    <h1>Управление пользователями</h1>
    @if (!isAdmin()) {
      <button class="btn btn-primary" routerLink="/profile">
        Мой профиль
      </button>
    }
  </div>

  <!-- Состояние загрузки -->
  @if (isLoading) {
    <div class="loading-state">
      <div class="spinner"></div>
      <p>Загрузка пользователей...</p>
    </div>
  }

  <!-- Сообщение об ошибке -->
  @if (errorMessage && !isLoading) {
    <div class="error-state">
      <p>❌ {{ errorMessage }}</p>
      <button class="btn btn-secondary" (click)="loadUsers()">Попробовать снова</button>
    </div>
  }

  <!-- Список пользователей -->
  @if (!isLoading && !errorMessage) {
    <div class="users-content">
      @if (users.length === 0) {
        <div class="empty-state">
          <h3>Пользователи не найдены</h3>
          <p>В системе пока нет зарегистрированных пользователей.</p>
        </div>
      }

      @if (users.length > 0) {
        <div class="users-grid">
          @for (user of users; track user.id) {
            <div class="user-card">
              <div class="user-info">
                <h3 class="user-name">{{ user.name }}</h3>
                <p class="user-login">Логин: {{ user.login }}</p>
                <p class="user-id">ID: {{ user.id }}</p>
              </div>

              <div class="user-actions">
                <button
                  class="btn btn-info"
                  [routerLink]="['/users', user.id]">
                  Профиль
                </button>

                @if (isAdmin()) {
                  <button
                    class="btn btn-warning"
                    [routerLink]="['/users', user.id, 'edit']">
                    Редактировать
                  </button>

                  <button
                    class="btn btn-danger"
                    (click)="deleteUser(user.id, user.name)"
                    [disabled]="!canDeleteUser(user.id)">
                    Удалить
                  </button>
                }
              </div>
            </div>
          }
        </div>
      }
    </div>
  }
</div>
