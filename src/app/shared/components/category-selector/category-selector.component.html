<!-- src/app/shared/components/category-selector/category-selector.component.html -->
<div class="category-selector">
  <button 
    class="category-selector-btn"
    (click)="toggleDropdown()"
    (mouseenter)="onButtonMouseEnter()"
    (mouseleave)="onButtonMouseLeave()">
    Все категории ▼
  </button>

  <div 
    class="category-dropdown" 
    *ngIf="isOpen"
    (mouseenter)="onDropdownMouseEnter()"
    (mouseleave)="onDropdownMouseLeave()">
    
    <div class="loading-indicator" *ngIf="isLoading">
      Загрузка категорий...
    </div>

    <div class="error-message" *ngIf="errorMessage && !isLoading">
      {{ errorMessage }}
    </div>

    <div class="category-level" *ngIf="!isLoading && !errorMessage">
      <div 
        *ngFor="let category of parentCategories"
        class="category-item"
        (mouseenter)="onParentCategoryHover(category.id)"
        [class.active]="selectedParentCategory === category.id">
        {{ category.name }}
        <span *ngIf="selectedParentCategory === category.id" class="arrow">▶</span>
      </div>
      
      <div class="no-categories" *ngIf="parentCategories.length === 0">
        Категории не найдены
      </div>
    </div>

    <div class="category-level child-level" *ngIf="selectedParentCategory && childCategories.length > 0">
      <div 
        *ngFor="let category of childCategories"
        class="category-item child"
        (click)="onCategorySelect(category.id)">
        {{ category.name }}
      </div>
      
      <div 
        class="category-item child all-category"
        (click)="onCategorySelect(selectedParentCategory)">
        Все в этой категории
      </div>
    </div>

    <div class="category-level child-level" *ngIf="selectedParentCategory && childCategories.length === 0">
      <div 
        class="category-item child all-category"
        (click)="onCategorySelect(selectedParentCategory)">
        Все в этой категории
      </div>
    </div>
  </div>
</div>